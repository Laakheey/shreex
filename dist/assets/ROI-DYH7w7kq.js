import{u as j,a as N,r as d,j as e,L as w}from"./index-BnJZT_WH.js";function v(){const{user:a}=j(),s=N(),[r,n]=d.useState([]),[t,h]=d.useState([]),[u,c]=d.useState(!0),[y,p]=d.useState({total:0,monthly:0,yearly:0,halfYearly:0});return d.useEffect(()=>{async function g(){if(!a?.id||!s)return;c(!0);const{data:i}=await s.from("user_earning_summaries").select("*").eq("user_id",a.id).single();i&&p({total:Number(i.total_lifetime_roi),monthly:Number(i.total_monthly_roi),halfYearly:Number(i.total_half_yearly_roi),yearly:Number(i.total_yearly_roi)});const{data:x,error:b}=await s.from("interest_payouts").select(`
            id,
            amount_added,
            created_at,
            investments!inner (
              plan_type,
              initial_amount,
              user_id
            )
          `).eq("investments.user_id",a.id).order("created_at",{ascending:!1});if(console.log(b),x){const f=x.map(l=>({id:l.id,date:new Date(l.created_at).toLocaleDateString(),planType:l.investments?.plan_type||"N/A",planBadgeClass:_(l.investments?.plan_type),description:`Daily interest reward on ${Number(l.investments?.initial_amount).toLocaleString()} USDT`,amount:Number(l.amount_added),amountFormatted:Number(l.amount_added).toLocaleString(void 0,{minimumFractionDigits:2})}));n(f)}const{data:m}=await s.from("withdrawals").select("*").eq("user_id",a.id).order("created_at",{ascending:!1});m&&h(m),c(!1)}g()},[a?.id,s]),{rewards:r,withdrawals:t,stats:y,loading:u}}function _(a){switch(a){case"monthly":return"bg-green-100 text-green-700";case"half-yearly":return"bg-purple-100 text-purple-700";case"yearly":return"bg-indigo-100 text-indigo-700";default:return"bg-gray-100 text-gray-700"}}const L=()=>{const{rewards:a,withdrawals:s,stats:r,loading:n}=v();return n?e.jsx(w,{}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("header",{className:"mb-10",children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900",children:"ROI Portfolio"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Track your daily earnings and lifetime performance."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-12",children:[e.jsx(o,{title:"Lifetime Total",value:r.total,color:"text-indigo-600",subtitle:"Total profit earned"}),e.jsx(o,{title:"Monthly ROI",value:r.monthly,color:"text-green-600",subtitle:"All-time monthly"}),e.jsx(o,{title:"6-Month ROI",value:r.halfYearly,color:"text-purple-600",subtitle:"All-time 6-month"}),e.jsx(o,{title:"Yearly ROI",value:r.yearly,color:"text-indigo-500",subtitle:"All-time yearly"})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100 mb-12",children:[e.jsxs("div",{className:"px-8 py-6 border-b border-gray-100 flex justify-between items-center bg-white",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Reward History"}),e.jsxs("span",{className:"px-4 py-1 bg-gray-100 text-gray-500 text-xs rounded-full font-bold",children:[a.length," Logs"]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 text-gray-400 text-xs uppercase tracking-widest font-bold",children:[e.jsx("th",{className:"px-8 py-4",children:"Date"}),e.jsx("th",{className:"px-8 py-4",children:"Plan"}),e.jsx("th",{className:"px-8 py-4",children:"Description"}),e.jsx("th",{className:"px-8 py-4 text-right",children:"Amount"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:a.map(t=>e.jsxs("tr",{className:"hover:bg-indigo-50/30 transition-colors",children:[e.jsx("td",{className:"px-8 py-5 text-sm text-gray-600",children:t.date}),e.jsx("td",{className:"px-8 py-5",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-bold uppercase ${t.planBadgeClass}`,children:t.planType})}),e.jsx("td",{className:"px-8 py-5 text-sm text-gray-500",children:t.description}),e.jsxs("td",{className:"px-8 py-5 text-right font-black text-green-600",children:["+",t.amountFormatted," USDT"]})]},t.id))})]}),a.length===0&&e.jsx("div",{className:"py-20 text-center text-gray-400 font-medium",children:"No rewards earned yet. Passive income starts 24h after investment."})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100",children:[e.jsxs("div",{className:"px-8 py-6 border-b border-gray-100 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Withdrawal History"}),e.jsxs("span",{className:"px-4 py-1 bg-gray-100 text-gray-500 text-xs rounded-full font-bold",children:[s.length," Entries"]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 text-gray-400 text-xs uppercase tracking-widest font-bold",children:[e.jsx("th",{className:"px-8 py-4",children:"Date"}),e.jsx("th",{className:"px-8 py-4",children:"Status"}),e.jsx("th",{className:"px-8 py-4",children:"Wallet Address"}),e.jsx("th",{className:"px-8 py-4 text-right",children:"Amount"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:s.map(t=>e.jsxs("tr",{className:"hover:bg-red-50/20 transition-colors",children:[e.jsx("td",{className:"px-8 py-5 text-sm text-gray-600",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-8 py-5",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-bold uppercase ${D(t.status)}`,children:t.status||"unknown"})}),e.jsx("td",{className:"px-8 py-5 text-sm text-gray-500 font-mono",children:t.wallet_address?`${t.wallet_address.slice(0,6)}...${t.wallet_address.slice(-4)}`:"-"}),e.jsxs("td",{className:"px-8 py-5 text-right font-black text-red-600",children:["-",Number(t.amount).toLocaleString()," USDT"]})]},t.id))})]}),s.length===0&&e.jsx("div",{className:"py-20 text-center text-gray-400 font-medium",children:"No withdrawal requests found."})]})]})]})})},o=({title:a,value:s,color:r,subtitle:n})=>e.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-md border border-gray-100 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase mb-1 tracking-wider",children:a}),e.jsxs("p",{className:`text-2xl font-black ${r}`,children:[s.toLocaleString(void 0,{minimumFractionDigits:2})," ",e.jsx("span",{className:"text-xs",children:"USDT"})]})]}),e.jsx("p",{className:"text-[10px] text-gray-300 mt-4 uppercase font-bold tracking-tighter",children:n})]}),D=a=>{switch(a?.toLowerCase()){case"approved":case"sent":return"bg-green-100 text-green-700";case"pending":return"bg-yellow-100 text-yellow-700";case"rejected":case"failed":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};export{L as default};
